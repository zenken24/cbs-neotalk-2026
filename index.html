<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CBS | Career & Business Society</title>

    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
      rel="stylesheet"
    />

    <style>
      :root {
        --primary: #6c5ce7;
        --secondary: #4a03b3;
        --accent: #8e75ff;
        --dark: #2d3436;
        --light: #f9f9f9;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        background: var(--dark);
        color: var(--light);
        overflow: hidden;
      }

      /* Welcome Popup */
      #welcome-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
        text-align: center;
      }

      .popup-card {
        background: var(--light);
        color: var(--dark);
        padding: 40px;
        border-radius: 20px;
        border: 5px solid var(--primary);
        max-width: 500px;
        width: 90%;
      }

      input {
        width: 100%;
        padding: 15px;
        margin: 20px 0;
        border: 2px solid #ddd;
        border-radius: 10px;
        font-size: 1.1rem;
      }

      .funky-btn {
        background: var(--primary);
        color: white;
        border: none;
        padding: 15px 30px;
        border-radius: 50px;
        font-weight: bold;
        cursor: pointer;
        transition: transform 0.2s, box-shadow 0.2s;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .small-img {
        max-height: 150px; /* tweak: 150‚Äì220px */
        width: auto;
      }

      .funky-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 10px 20px rgba(108, 92, 231, 0.4);
      }

      /* Slideshow System */
      .slide {
        height: 100vh;
        width: 100%;
        display: none;
        padding: 50px;
        text-align: center;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background: linear-gradient(135deg, #2d3436 0%, #000000 100%);
      }

      .slide.active {
        display: flex;
        animation: fadeIn 0.8s;
      }

      .content-box {
        max-width: 800px;
        background: rgba(255, 255, 255, 0.05);
        padding: 40px;
        border-radius: 30px;
        border-left: 8px solid var(--secondary);
      }

      h1 {
        font-size: 3rem;
        margin-bottom: 20px;
        color: var(--secondary);
      }

      p {
        font-size: 1.2rem;
        line-height: 1.6;
        margin-bottom: 20px;
      }

      .img-placeholder {
        width: 100%;
        max-height: 300px;
        border-radius: 15px;
        object-fit: cover;
        margin-bottom: 20px;
        border: 3px solid var(--primary);
      }

      .grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin: 20px 0;
      }

      .reward-msg {
        font-size: 2.5rem;
        font-weight: bold;
        color: var(--accent);
      }

      .initiative {
        font-size: 1.8rem;
        font-weight: 700;
        background: rgba(255, 255, 255, 0.06);
        padding: 20px;
        border-radius: 15px;
      }

      /* New Background Grid for Final Slide */
      .bg-grid {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        grid-template-rows: repeat(2, 1fr);
        gap: 10px;
        padding: 10px;
        z-index: -1;
        opacity: 0.3; /* Makes text readable over images */
      }

      .bg-grid img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 10px;
      }

      #reward-slide {
        position: relative; /* Needed for the bg-grid positioning */
        background: #000;
      }

    .reward-video{
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: contain;   /* ‚úÖ shows full video */
      object-position: center;
      background: #000;      /* letterbox bars */
      display: none;
    }


      .announcement-banner {
        background: var(--accent);
        color: white;
        padding: 10px 20px;
        font-size: 1.5rem;
        font-weight: 800;
        transform: rotate(-2deg);
        display: inline-block;
        margin-bottom: 20px;
        box-shadow: 5px 5px 0px var(--dark);
      }

      .bg-blur {
        z-index: 0;
        position: absolute;
        inset: 0;
        background-size: cover;
        background-position: center;
        filter: blur(4px) brightness(0.5);
        transform: scale(1.1);
        pointer-events: none; /* just in case */
      }

      .slide {
        position: relative;
        overflow: hidden;
      }

      .content-box {
        position: relative;
        z-index: 2;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
    </style>
  </head>

  <body>
    <div id="welcome-overlay">
      <div class="popup-card animate__animated animate__bounceIn">
        <h1 style="color: var(--primary)">üìçWelcome to CBS! üíº</h1>
        <p>Ready to level up your career? Enter your Student ID to begin the journey.</p>

        <input
          type="text"
          id="studentID"
          placeholder="Format: 24004****"
          maxlength="9"
        />

        <button class="funky-btn" onclick="startExperience()">Enter the Zone</button>

        <p
          id="error-msg"
          style="color: red; font-size: 0.9rem; margin-top: 10px; display: none;"
        >
          Invalid ID Format!
        </p>
      </div>
    </div>

    <main id="main-content">
      <section class="slide active">
        <div class="content-box">
          <img
            src="iutcbs.jpg"
            alt="CBS Overview"
            class="img-placeholder small-img"
          />
          <h1>The CBS Mission</h1>
          <p>
            Career & Business Society (CBS) is more than a club; it's an engine for
            professional growth. We operate through specialized departments to bring
            you world-class events.
          </p>
          <button class="funky-btn" onclick="nextSlide(1)">Next: Our Nature ‚ûî</button>
        </div>
      </section>

      <section class="slide">
        <!-- BACKGROUND IMAGE -->
        <div class="bg-blur" style="background-image: url('firstslidebg.jpg');"></div>

        <div class="content-box">
          <h1>Professional DNA</h1>
          <p>
            We focus on <strong>Quality over Quantity</strong>. CBS is a formal,
            professionally organized environment designed to groom you for your future
            career through high-level skill development.
          </p>
          <button class="funky-btn" onclick="nextSlide(2)">See Initiatives ‚ûî</button>
        </div>
      </section>

      <section class="slide">
        <div class="bg-blur" style="background-image: url('biznation2.jpg');"></div>

        <div class="content-box">
          <h1>Key Initiatives</h1>

          <div class="grid">
            <div class="initiative">üî• NeoTalk</div>
            <div class="initiative">üìÇ CaseBites</div>
            <div class="initiative">üåé BizNation</div>
            <div class="initiative">üíº Career Expo</div>
          </div>

          <p>Developing problem-solving, leadership, and networking skills one event at a time.</p>

          <button class="funky-btn" onclick="nextSlide(3)">Why Join Us? ‚ûî</button>
        </div>
      </section>

      <section class="slide">
        <div class="bg-blur" style="background-image: url('edge.jpg');"></div>

        <div class="content-box">
          <h1>The best club to enrich your career</h1>
          <p>
            Join the most active network! Enhance your communication, evaluate your
            competence, and build the confidence required for the corporate world.
          </p>
          <button class="funky-btn" onclick="nextSlide(4)">What's Happening Now? ‚ûî</button>
        </div>
      </section>

      <section class="slide">
        <div class="bg-blur" style="background-image: url('fun.jpg');"></div>

        <div class="content-box">
          <h1>Opportunities & Fun</h1>

          <h3>Free Refreshments. COME AND FIND OUT ü§ó</h3>
          <h3>Indoor & Outdoor Games üéÆ</h3>
          <h3>Learn about CBS and enhance your networking skills üéØ</h3>

          <p class="big-highlight">
            Everything we offer is <strong>100% Free</strong>.
          </p>

          <button class="funky-btn" onclick="nextSlide(5)">Freshman Advice ‚ûî</button>
        </div>
      </section>

      <section class="slide">
        <div class="bg-blur" style="background-image: url('yo.jpeg');"></div>

        <div class="content-box">
          <h1>Dear juniors...</h1>
          <p>
            Your first year is the golden time to explore. Don't wait! Start building
            your skills now so you're ready when opportunity knocks.
          </p>

          <button class="funky-btn" onclick="checkReward()">Claim Your Reward ‚ûî</button>
        </div>
      </section>

      <section class="slide" id="reward-slide" style="padding: 0; overflow: hidden;">
    <video id="reward-video" class="reward-video" playsinline>
      <source src="CBS.mp4" type="video/mp4" />
    </video>


        <div
          id="final-result-content"
          class="content-box"
          style="display: none; background: rgba(106, 68, 172, 0.85); z-index: 10;"
        >
          <div class="announcement-banner animate__animated animate__flash animate__infinite">
            NEOTALK ON 5th FEB, 3:30 PM
          </div>

          <h1>Final Result</h1>
          <div id="reward-display" class="reward-msg animate__animated animate__tada"></div>

          <p style="margin-top: 20px;">Follow our official page for more updates!</p>
          <button class="funky-btn" onclick="location.reload()">Back to Start</button>
        </div>
      </section>
    </main>

    <script>
      // 1. PASTE YOUR WEBHOOK URL HERE
      const webhookURL = "https://webhook.site/8894e745-2fb3-41ff-9f89-fbe812210588";

      // CONFIGURATION: KitKat Winners
      const winners = ["240042120", "240041245", "240041156", "240042135", "240041126"];

      let participantList = JSON.parse(localStorage.getItem("cbs_master_list")) || [];
      let currentUserID = "";

      function startExperience() {
        const idInput = document.getElementById("studentID").value.trim();

        // SECRET COMMAND: Type 'showme' to see IDs entered on THIS device
        if (idInput === "showme") {
          alert("Local Participants: \n" + participantList.join("\n"));
          return;
        }

        const idNum = parseInt(idInput);

        // Device Lock Check
        if (localStorage.getItem("cbs_device_locked")) {
          alert("This device has already participated!");
          return;
        }

        // Range Validation
        const isRange1 = idNum >= 240041101 && idNum <= 240041159;
        const isRange2 = idNum >= 240041201 && idNum <= 240041259;
        const isRange3 = idNum >= 240042101 && idNum <= 240042160;

        if (!(isRange1 || isRange2 || isRange3)) {
          document.getElementById("error-msg").innerText = "Invalid ID Range!";
          document.getElementById("error-msg").style.display = "block";
          return;
        }

        // --- SEND DATA TO WEBHOOK (ULTRA-RELIABLE METHOD) ---
        // This creates a "fake" image request that carries your ID data
        const ping = new Image();
        ping.src = webhookURL + "?studentID=" + idInput + "&status=joined";

        // --- SAVE BACKUP LOCALLY ---
        participantList.push(idInput);
        localStorage.setItem("cbs_master_list", JSON.stringify(participantList));

        // --- SAVE BACKUP LOCALLY ---
        participantList.push(idInput);
        localStorage.setItem("cbs_master_list", JSON.stringify(participantList));

        currentUserID = idInput;
        document.getElementById("welcome-overlay").style.display = "none";
      }

      function nextSlide(targetIndex) {
        const slides = document.querySelectorAll(".slide");
        slides.forEach((slide) => slide.classList.remove("active"));
        slides[targetIndex].classList.add("active");
      }

      function checkReward() {
        const slides = document.querySelectorAll(".slide");
        const video = document.getElementById("reward-video");
        const resultContent = document.getElementById("final-result-content");
        const display = document.getElementById("reward-display");

        slides[5].classList.remove("active");
        slides[6].classList.add("active");

        video.style.display = "block";
        video.play();

        video.onended = function () {
          video.style.display = "none";
          resultContent.style.display = "block";

          localStorage.setItem("cbs_device_locked", "true");

          if (winners.includes(currentUserID)) {
            display.innerHTML =
              "üéÅ CONGRATS! <br> You have gotten a KitKat! <br> <span style='font-size: 1.2rem;'>Claim it now at the booth!</span>";
            display.style.color = "#55efc4";
          } else {
            display.innerHTML = "Better luck next time! <br> Come by to have some snacks üòã";
            display.style.color = "#ff7675";
          }
        };
      }
    </script>
  </body>
</html>
